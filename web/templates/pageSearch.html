{{ template "__header.html" . }}

<h2>Ricerca</h2>

<form action="/search">
    <input type="search" name="query" value="{{.query}}">
    <input type="submit">
</form>

<p>Puoi applicare filtri alla ricerca con la sintassi "campo:valore", ad esempio "area:Catania javascript". Puoi filtrare per area, tags, sector, short, description.</p>

{{ if .query }}
    {{ if or .professionals .companies .communities false }}
        <h2>Risultati ricerca:</h2>
    {{ else }}
        <h2>Nessun risultato</h2>
    {{ end }}
{{ end }}

{{ if .communities }}
    <h3>Community</h3>
    <ul>
    {{ range .communities }}
        <li>
        <a href="{{ pageurl .Page }}">{{ .Page.Title }}</a> 
        {{ if .Fragments }}
        <ul>
        {{ range $key, $fragments := .Fragments }}
            {{ if $fragments }}
            <li><strong>{{ $key }}</strong>:
                {{ range $fragments }}
                    <span>{{ (sanitize .) }}</span>
                {{ end }}
            </li>
            {{ end }}
        {{ end }}
        </ul>
        {{ end }}
        </li>
    {{ end }}
    </ul>
{{ end }}


{{ if .companies }}
    <h3>Aziende</h3>
    <ul>
    {{ range .companies }}
        <li>
        <a href="{{ pageurl .Page }}">{{ .Page.Title }}</a> 
        {{ if .Fragments }}
        <ul>
        {{ range $key, $fragments := .Fragments }}
            {{ if $fragments }}
            <li><strong>{{ $key }}</strong>:
                {{ range $fragments }}
                    <span>{{ (sanitize .) }}</span>
                {{ end }}
            </li>
            {{ end }}
        {{ end }}
        </ul>
        {{ end }}
        </li>
    {{ end }}
    </ul>
{{ end }}

{{ if .professionals }}
    <h3>Professionisti</h3>
    <ul>
    {{ range .professionals }}
        <li>
        <a href="{{ pageurl .Page }}">{{ .Page.Title }}</a> 
        {{ if .Fragments }}
        <ul>
        {{ range $key, $fragments := .Fragments }}
            {{ if $fragments }}
            <li><strong>{{ $key }}</strong>:
                {{ range $fragments }}
                    <span>{{ (sanitize .) }}</span>
                {{ end }}
            </li>
            {{ end }}
        {{ end }}
        </ul>
        {{ end }}
        </li>
    {{ end }}
    </ul>
{{ end }}

{{ template "__footer.html" }}